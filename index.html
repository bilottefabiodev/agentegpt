<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Acessando Agente GPT...</title>

    <style>
        body {
            font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
            background-color: #f4f7f6;
            color: #333;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            text-align: center;
            padding: 20px;
        }
        
        h3 { margin-bottom: 10px; color: #2c3e50; }
        p { margin-top: 0; color: #7f8c8d; }

        .loader {
            border: 4px solid #e0e0e0;
            border-top: 4px solid #10a37f;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin-bottom: 25px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        
        .btn {
            margin-top: 25px;
            padding: 14px 28px;
            background-color: #10a37f;
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-weight: 600;
            font-size: 16px;
            transition: background-color 0.3s ease;
            box-shadow: 0 4px 6px rgba(16, 163, 127, 0.2);
            cursor: pointer;
        }
    </style>

    <script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};
    if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
    n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];
    s.parentNode.insertBefore(t,s)}(window, document,'script',
    'https://connect.facebook.net/en_US/fbevents.js');
    
    fbq('init', '185994519269249'); 
    fbq('track', 'PageView');
    fbq('track', 'ViewContent'); 
    </script>
    </head>
<body>

    <div class="loader"></div>
    <h3>Conectando ao App...</h3>
    <p>Abrindo Tatiana Marx - Arquitetura de Capital</p>
    
    <a href="#" id="manualLink" class="btn">Abrir Agora</a>

    <script>
        // CONFIGURAÇÃO
        var gptUrl = "https://chatgpt.com/g/g-695042595618819193d2d76e295e61ef-clone-tatiana-marx-arquitetura-de-capital-autoral";
        
        // Android Intent: Tenta abrir o APP, se falhar, cai no browser (fallback)
        // Isso é mais robusto que o intent simples
        var androidUrl = "intent://chatgpt.com/g/g-695042595618819193d2d76e295e61ef-clone-tatiana-marx-arquitetura-de-capital-autoral#Intent;scheme=https;package=com.openai.chatgpt;S.browser_fallback_url=" + encodeURIComponent(gptUrl) + ";end";

        function getMobileOS() {
            var userAgent = navigator.userAgent || navigator.vendor || window.opera;
            if (/android/i.test(userAgent)) return "Android";
            if (/iPad|iPhone|iPod/.test(userAgent) && !window.MSStream) return "iOS";
            return "unknown";
        }

        function forceRedirect() {
            var os = getMobileOS();
            
            if (os === "Android") {
                // Tenta forçar a saída do navegador via substituição de local
                window.location.replace(androidUrl);
            } else {
                // iOS e Desktop
                window.location.replace(gptUrl);
            }
        }

        // Configuração do Botão Manual
        var btn = document.getElementById('manualLink');
        btn.onclick = function(e) {
            e.preventDefault(); // Previne comportamento padrão para controlar o link
            var os = getMobileOS();
            if (os === "Android") {
                window.location.href = androidUrl;
            } else {
                window.location.href = gptUrl;
            }
        };

        // AUTO-REDIRECT
        // Usamos setTimeout para garantir que o Pixel dispare
        setTimeout(function() {
            // Tentativa 1: Simular um clique num elemento invisível (Bypass em alguns browsers)
            var fakeLink = document.createElement('a');
            
            if (getMobileOS() === "Android") {
                fakeLink.href = androidUrl;
            } else {
                fakeLink.href = gptUrl;
            }
            
            fakeLink.style.display = 'none';
            document.body.appendChild(fakeLink);
            
            // Tenta o clique programático
            fakeLink.click();
            
            // Fallback de segurança: se o clique falhar, usa o replace normal
            setTimeout(function(){
                forceRedirect();
            }, 100);

        }, 1500);

    </script>

</body>
</html>
